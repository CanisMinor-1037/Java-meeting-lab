# Redis缓存穿透解决方案 - API文档

## 接口概述

本文档描述了Redis缓存穿透解决方案示例项目的所有API接口。项目提供了四种不同的缓存策略实现，用于演示不同的缓存穿透解决方案。

## 基础信息

- 基础URL: `http://localhost:8080`
- 响应格式: JSON
- 编码方式: UTF-8

## 接口列表

### 1. 无缓存方案

直接查询数据库，不进行缓存。

**请求信息：**
- 请求路径：`/api/products/{id}`
- 请求方法：GET
- 路径参数：
  - id: 商品ID（Long类型）

**响应示例：**
```json
{
    "id": 1,
    "name": "iPhone 15",
    "price": 999.99,
    "stock": 100
}
```

### 2. 基础缓存方案

使用Redis实现基础的缓存功能，但无法有效防止缓存穿透。

**请求信息：**
- 请求路径：`/api/products/cache/{id}`
- 请求方法：GET
- 路径参数：
  - id: 商品ID（Long类型）

**响应示例：**
```json
{
    "id": 1,
    "name": "iPhone 15",
    "price": 999.99,
    "stock": 100
}
```

### 3. 空值缓存方案

将空结果也进行缓存，设置较短的过期时间，有效防止缓存穿透。

**请求信息：**
- 请求路径：`/api/products/null-cache/{id}`
- 请求方法：GET
- 路径参数：
  - id: 商品ID（Long类型）

**响应示例：**
```json
{
    "id": 1,
    "name": "iPhone 15",
    "price": 999.99,
    "stock": 100
}
```

### 4. 布隆过滤器方案

使用Redisson的布隆过滤器预先判断数据是否存在，有效防止缓存穿透。

**请求信息：**
- 请求路径：`/api/products/bloom-filter/{id}`
- 请求方法：GET
- 路径参数：
  - id: 商品ID（Long类型）

**响应示例：**
```json
{
    "id": 1,
    "name": "iPhone 15",
    "price": 999.99,
    "stock": 100
}
```

## 测试数据说明

### 测试用例1：存在的数据
- ID: 1
- 预期结果：返回商品信息
- 用途：测试正常数据查询

### 测试用例2：不存在的数据
- ID: 2
- 预期结果：返回null
- 用途：测试缓存穿透防护效果

### 测试用例3：无效ID
- ID: -1
- 预期结果：返回null
- 用途：测试布隆过滤器功能

## 错误响应

当发生错误时，接口会返回以下格式的响应：

```json
{
    "timestamp": "2024-03-31T12:00:00.000+00:00",
    "status": 500,
    "error": "Internal Server Error",
    "message": "错误信息描述",
    "path": "/api/products/xxx"
}
```

## 注意事项

1. 所有接口的响应时间会因不同的缓存策略而有所差异
2. 布隆过滤器方案可能存在误判，但不会漏判
3. 空值缓存方案的空值过期时间设置为5分钟
4. 正常数据的缓存过期时间设置为30分钟
5. 布隆过滤器的误判率设置为0.01，预期插入量为1000 